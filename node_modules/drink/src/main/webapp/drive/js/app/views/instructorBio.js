define( [
	'jquery',
	'../../../../bower_components/underscore/underscore',
	'backbone',
	'i18next',
	'hbs!templates/instructorBio',
	'views/header'
], function( $, _, Backbone, i18next, instructorBioTemplate, HeaderView ) {
	var InstructorBioView = Backbone.View.extend( {

		render: function( data ) {

			if( typeof analytics !== 'undefined' ) {
				analytics.trackView( 'Instructor Bio' );
			}

			var self = this;
			var params = data || {};
			params.deviceWidth = $( window ).width();

			$( 'body' ).removeClass();

			var compiledTemplate = instructorBioTemplate( params );
			this.$el.html( compiledTemplate );

			var header = new HeaderView();

			header.render( {
				back: true,
				title: ( data.givenName || '' ) + ' ' + ( data.familyName || '' )
			} );

			this.$el.find( '#header' ).append( header.el );

			if( navigator.mixpanel ) {
				navigator.mixpanel.track(
					'Instructor viewed detail',
					{
						'Instructor': params.id,
						'content': 'About'
					},
					function(){ },
					function( message ) {
						console.log( message );
					}
				);
			}

			window.app.router.postRender( self );
		}

	} );

	return InstructorBioView;
} );
