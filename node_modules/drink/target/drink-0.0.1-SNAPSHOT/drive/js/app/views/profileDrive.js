define( [
    'jquery',
    '../../../../bower_components/underscore/underscore',
    'backbone',
		'hbs!templates/profileList'
], function( $, _, Backbone, profileListTemplate ) {
	var ProfileDrive = Backbone.View.extend( {
		tagName: 'li',

		events: {
			'click': 'showDrive'
		},

		initialize: function() {
			this.render();
		},

		render: function() {
			var self = this;
			var params = this.model.toJSON() || {};

			var compiledTemplate = profileListTemplate( params );
			self.$el.html( compiledTemplate );
			self.delegateEvents();

			return self;
		},

		showDrive: function( event ) {
			event.preventDefault();

			if ( navigator.mixpanel ) {
				navigator.mixpanel.track(
					'Drive view',
					{},
					function () {},
					function ( message ) {
						console.log( message );
					}
				);
			}

			// go to drive
			window.app.router.navigate( '/drives/' + this.model.id, true );

		}
	} );

	return ProfileDrive;
} );
